import { observeTimeline } from 'motion-dom';
import { getTimeline } from './utils/get-timeline.mjs';

function attachToAnimation(animation, options) {
    const timeline = getTimeline(options);
    return animation.attachTimeline({
        timeline: options.target ? undefined : timeline,
        observe: (valueAnimation) => {
            valueAnimation.pause();
            return observeTimeline((progress) => {
<<<<<<< HEAD
                valueAnimation.time =
                    valueAnimation.iterationDuration * progress;
=======
                valueAnimation.time = valueAnimation.duration * progress;
>>>>>>> 4ab24e2f80aa26142a636391fc9b54e3d45777c9
            }, timeline);
        },
    });
}

export { attachToAnimation };
